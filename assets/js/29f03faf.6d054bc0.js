"use strict";(self.webpackChunkinstana_intro_lab=self.webpackChunkinstana_intro_lab||[]).push([[38],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>g});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},h=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=i,g=p["".concat(l,".").concat(d)]||p[d]||u[d]||s;return n?a.createElement(g,r(r({ref:t},h),{},{components:n})):a.createElement(g,r({ref:t},h))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:i,r[1]=o;for(var c=2;c<s;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8046:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const s={title:"Section 2 - Diagnose a Problem",description:"Use Instana to diagnose a problem within a business application"},r=void 0,o={unversionedId:"Diagnose/index",id:"Diagnose/index",title:"Section 2 - Diagnose a Problem",description:"Use Instana to diagnose a problem within a business application",source:"@site/docs/03-Diagnose/index.mdx",sourceDirName:"03-Diagnose",slug:"/Diagnose/",permalink:"/InstanaIntroductoryLab/docs/Diagnose/",draft:!1,editUrl:"https://github.com/b1stern/InstanaIntroductoryLab/docs/03-Diagnose/index.mdx",tags:[],version:"current",frontMatter:{title:"Section 2 - Diagnose a Problem",description:"Use Instana to diagnose a problem within a business application"},sidebar:"tutorialSidebar",previous:{title:"Section 1 - Explore Instana and the Quote of the Day Application",permalink:"/InstanaIntroductoryLab/docs/Explore/"}},l={},c=[{value:"2-1: Evaluate the Events via an Incident",id:"2-1-evaluate-the-events-via-an-incident",level:2},{value:"2-2: Analyze the Calls",id:"2-2-analyze-the-calls",level:2},{value:"2-3: Confirm Your Diagnosis",id:"2-3-confirm-your-diagnosis",level:2},{value:"2-4: Summary",id:"2-4-summary",level:2}],h={toc:c},p="wrapper";function u(e){let{components:t,...s}=e;return(0,i.kt)(p,(0,a.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In this section of the lab, you will learn how Instana can help you get to root cause of a problem in a quick and intuitive manner."),(0,i.kt)("h2",{id:"2-1-evaluate-the-events-via-an-incident"},"2-1: Evaluate the Events via an Incident"),(0,i.kt)("p",null,"On the left side, select ",(0,i.kt)("strong",{parentName:"p"},'"Events"')),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(8134).Z,width:"199",height:"605"})),(0,i.kt)("p",null,"You will see a list of Incidents that are affecting the environment.  It will be all Incidents that occurred within the time window you have selected in the upper right corner.  For example, 1 hour."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9625).Z,width:"3465",height:"1432"})),(0,i.kt)("p",null,"This will open up a panel showing all of the Incidents that are affecting the monitored systems and applications.\nYou will also notice that there is an ",(0,i.kt)("strong",{parentName:"p"},"Issues")," tab and a ",(0,i.kt)("strong",{parentName:"p"},"Changes")," tab.  The ",(0,i.kt)("strong",{parentName:"p"},"Issues")," tab is all of the raw events\nthat are effecting the environment.  The ",(0,i.kt)("strong",{parentName:"p"},"Change")," tab is a list of changes that have occurred.\nThe ",(0,i.kt)("strong",{parentName:"p"},"Incidents")," are the raw Events (Issues) that have been correlated via Analytics into an Incident. "),(0,i.kt)("p",null,"Make sure that the time selection in the upper right corner is set to ",(0,i.kt)("strong",{parentName:"p"},'"Last hour"')),(0,i.kt)("p",null,"As seen in the previous picture, select the Incident that is triggering on the ",(0,i.kt)("strong",{parentName:"p"},"QOTD High Erroneous Call Rate")," on the\n",(0,i.kt)("strong",{parentName:"p"},"vader-acemq.coc-ibm.com-BK1:EG2")," entity.  You will notice that it is an Incident indicating that the Erroneous\ncall rate exceeded 5%. "),(0,i.kt)("p",null,"You will see the details related to raw ",(0,i.kt)("strong",{parentName:"p"},"Issues/Events")," that were correlated via ",(0,i.kt)("strong",{parentName:"p"},"analytics")," into an ",(0,i.kt)("strong",{parentName:"p"},"Incident"),".\n",(0,i.kt)("img",{src:n(3582).Z,width:"3265",height:"1505"})),(0,i.kt)("p",null,"In this case, you should see that 4 Issues/Events were correlated into a single Incident.  In many cases, you'll see 10 or more.\nThis provides you with noise reduction in the environment and additional context as you debug the problem."),(0,i.kt)("p",null,"Within the Incident, you can see when each ",(0,i.kt)("strong",{parentName:"p"},"Event")," opened and in some cases, when they closed. "),(0,i.kt)("p",null,"You will see the ",(0,i.kt)("strong",{parentName:"p"},'"Triggering Event"')," and any ",(0,i.kt)("strong",{parentName:"p"},'"Related Events"'),".  The triggering event is the first event that\nimpacts an application.  Either a service or a website.  The related events are a timeline of the related events with the first event at the top."),(0,i.kt)("p",null,"On the right side, click on the ",(0,i.kt)("strong",{parentName:"p"},'"+"')," symbol to expand the Triggering Event.\n",(0,i.kt)("img",{src:n(5091).Z,width:"3240",height:"1305"})),(0,i.kt)("p",null,"You can see in the historical graph that the erroneous calls reached high rates for a period of time.\n",(0,i.kt)("img",{src:n(9043).Z,width:"2962",height:"1127"})),(0,i.kt)("h2",{id:"2-2-analyze-the-calls"},"2-2: Analyze the Calls"),(0,i.kt)("p",null,"Next, click the ",(0,i.kt)("strong",{parentName:"p"},'"Analyze Calls"')," button to analyze the calls."),(0,i.kt)("p",null,"You will be taken to an analytics screen where you can see a summary of the failed calls for ",(0,i.kt)("strong",{parentName:"p"},"gen.supplychain"),"."),(0,i.kt)("p",null,"Click on the down arrow to expand to see the list of failed calls.\n",(0,i.kt)("img",{src:n(6521).Z,width:"2820",height:"1162"})),(0,i.kt)("p",null,"You can see a large number of failed calls.\n",(0,i.kt)("img",{src:n(7986).Z,width:"2872",height:"960"})),(0,i.kt)("p",null,"Select one of the failed ",(0,i.kt)("strong",{parentName:"p"},"gen.supplychain")," calls."),(0,i.kt)("p",null,"You will be taken to a screen where you can see the Call Stack and Stack Trace data. You explored this previously,\nbut you did it with a good transaction.  Now you are examining a failed transaction.\n",(0,i.kt)("img",{src:n(5324).Z,width:"3260",height:"1355"})),(0,i.kt)("p",null,"Scroll to the bottom of the page where you see the ",(0,i.kt)("strong",{parentName:"p"},"call stack"),".  "),(0,i.kt)("p",null,"Expand the plus signs to see the full ",(0,i.kt)("strong",{parentName:"p"},"call stack"),"\n",(0,i.kt)("img",{src:n(4256).Z,width:"1990",height:"1252"})),(0,i.kt)("p",null,"You should now see the full ",(0,i.kt)("strong",{parentName:"p"},"call stack"),".\n",(0,i.kt)("img",{src:n(3670).Z,width:"1960",height:"1267"})),(0,i.kt)("p",null,"When you see errors, normally you go to the bottom of the call stack.  That's because the error in the last call is likely affecting the upstream calls.  "),(0,i.kt)("p",null,"Click on the last error and examine the information on the right side. "),(0,i.kt)("p",null,"You will see the following error message:  ",(0,i.kt)("strong",{parentName:"p"},"IBM MQ call failed with compcode '2' ('MQCC_FAILED') reason '2053' ('MQRC_Q_FULL')"),"\n",(0,i.kt)("img",{src:n(9501).Z,width:"3225",height:"1315"})),(0,i.kt)("p",null,"This error message indicates that the MQ Queue is full and new messages can't be put on the queue.  In the future, Instana will be providing a translated error message for\nkey messages like this so that you don't have to lookup the error codes."),(0,i.kt)("p",null,"At this point, we believe we have a diagnosis for our problem.  The MQ Queue is full and the transactions are failing because they can't post a message to the queue."),(0,i.kt)("h2",{id:"2-3-confirm-your-diagnosis"},"2-3: Confirm Your Diagnosis"),(0,i.kt)("p",null,"In many cases, you can confirm the root cause of the problem by analyzing the ",(0,i.kt)("strong",{parentName:"p"},"call stack")," and ",(0,i.kt)("strong",{parentName:"p"},"stack trace"),", but sometimes you need to investigate further.  "),(0,i.kt)("p",null,"In this case, you may want to examine the queue that is causing this error.  Instana automatically puts a link to the queue in the lower right corner.  For other technologies,\nthere are similar links."),(0,i.kt)("p",null,"Now, scroll all the way to the bottom on the right side of the screen.  You'll see that there is a link that will link to the MQ Queue named CP4I.DEMO.API.Q.  This is the queue that\nis being used for this application transaction.\n",(0,i.kt)("img",{src:n(8479).Z,width:"1376",height:"328"})),(0,i.kt)("p",null,"Click on the link to navigate to the queue details."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(5).Z,width:"1337",height:"887"})),(0,i.kt)("p",null,"On this screen, you'll notice a few important things."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"In the upper right corner, you'll notice that the time range is specifically set to the timeframe when the Incident was open."),(0,i.kt)("li",{parentName:"ul"},"Notice that during a portion of the time, the queue depth reached 100%.  In this case, the ",(0,i.kt)("strong",{parentName:"li"},"Max")," depth is the same as the ",(0,i.kt)("strong",{parentName:"li"},"Current")," depth."),(0,i.kt)("li",{parentName:"ul"},"No messages are going in or out of the queue.")),(0,i.kt)("p",null,"Clearly there is a problem with this queue.  The queue is full and transactions won't work properly because new messages can't be placed on the queue.  We need to resolve the queue depth problem in order to fix the application."),(0,i.kt)("p",null,"That completes this section of the lab."),(0,i.kt)("h2",{id:"2-4-summary"},"2-4: Summary"),(0,i.kt)("p",null,"In this portion of the lab, you learned out to diagnose a problem in Instana.  Ultimately, determining that the queue was\nfull and preventing transactions from completing."),(0,i.kt)("hr",null))}u.isMDXComponent=!0},5324:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/badCall-175b89f9d55a5c6c8f1a4137f169e5ae.png"},9043:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/erroneous-3246a50028a975958823fb0eb1a96eda.png"},9501:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/errorCode-d88edeb3664f1626847b634b2664aa5d.png"},8134:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/events-bf19437ebce782a80914e43128e4dae9.png"},6521:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/expand-e176c6718d9e1402e376bfbd52b95c1b.png"},4256:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/expandCall-053e5f9fdce8b22d3b076a04be407095.png"},3670:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/fullCallStack-49cd212c1041c2e6f9306899a7c05195.png"},9625:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/incident-45d1f2ce9d1bbbcb51f357c285aec548.png"},5:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/queueDetails-d11d4f90440bbb4c90aad01b4a821e6b.png"},8479:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/queueLink-96f857a6065fd6db6c38ac3658cf1c1f.png"},7986:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/singleFailedCall-e30ac48105e7d0616465db1766180022.png"},3582:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/singleIncident-99c6a9c3a9c6b7fba712caf8b2a72582.png"},5091:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/singleIncident2-90a494c89ceca510e025d4a0a82d2e43.png"}}]);